!function(l){"use strict";var r,i,n,o,a;function s(e,t){if(!(this instanceof s)){var n=new s(e,t);return n.open(),n}this.id=s.id++,this.setup(e,t),this.chainCallbacks(s._callbackChain)}void 0!==l?l.fn.jquery.match(/-ajax/)?"console"in window&&window.console.info("Featherlight needs regular jQuery, not the slim version."):(r=[],o=function(e){l.each(s.opened().reverse(),function(){if(!e.isDefaultPrevented()&&!1===this[n[e.type]](e))return e.preventDefault(),e.stopPropagation(),!1})},a=function(e){var t;e!==s._globalHandlerInstalled&&(s._globalHandlerInstalled=e,t=l.map(n,function(e,t){return t+"."+s.prototype.namespace}).join(" "),l(window)[e?"on":"off"](t,o))},s.prototype={constructor:s,namespace:"featherlight",targetAttr:"data-target",variant:null,resetCss:!(n={keyup:"onKeyUp",resize:"onResize"}),background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",closeOnClick:"background",closeOnEsc:!0,loading:'<div class="featherlight-loader"></div>',persist:!(i=function(t){return r=l.grep(r,function(e){return e!==t&&0<e.$instance.closest("body").length})}),otherClose:null,beforeOpen:l.noop,beforeContent:l.noop,beforeClose:l.noop,afterOpen:l.noop,afterContent:l.noop,afterClose:l.noop,onKeyUp:l.noop,onResize:l.noop,type:null,closeIcon:"&#x2716;",contentFilters:["jquery","image","html","ajax","iframe","text"],seamless:null,width:"",height:"",maxWidth:"",maxHeight:"",requireWindowWidth:null,setup:function(e,t){"object"!=typeof e||e instanceof l!=!1||t||(t=e,e=void 0);var n=l.extend(this,t,{target:e}),e=n.resetCss?n.namespace+"-reset":n.namespace,e=l(n.background||['<div class="'+e+"-loading "+e+'">','<div class="'+e+"-content"+(n.seamless?" featherlight-seamless":"")+'">','<div class="'+n.namespace+'-inner">'+n.loading+"</div>","</div>","</div>"].join("")),r="."+n.namespace+"-close"+(n.otherClose?","+n.otherClose:"");return n.$instance=e.clone().addClass(n.variant),n.$instance.on(n.closeTrigger+"."+n.namespace,function(e){var t=l(e.target);("background"===n.closeOnClick&&t.is("."+n.namespace)||"anywhere"===n.closeOnClick||t.closest(r).length)&&(n.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;function e(e){return t.$currentTarget&&t.$currentTarget.attr(e)}var t=this,n=this.constructor.contentFilters,r=e(t.targetAttr),i=t.target||r||"",o=n[t.type];if(!o&&i in n&&(o=n[i],i=t.target&&r),i=i||e("href")||"",!o)for(var a in n)t[a]&&(o=n[a],i=t[a]);if(!o){var s=i,i=null;if(l.each(t.contentFilters,function(){return o=n[this],!(i=!(i=o.test?o.test(s):i)&&o.regex&&s.match&&s.match(o.regex)?s:i)}),!i)return"console"in window&&window.console.error("Featherlight: no content filter found "+(s?' for "'+s+'"':" (no target specified)")),!1}return o.process.call(t,i)},setContent:function(e){var t=this;return t.$instance.removeClass(t.namespace+"-loading"),t.$content=e.show(),t.$instance.find("."+t.namespace+"-content").html(t.$content),t.closeIcon&&t.$instance.find("."+t.namespace+"-content").prepend('<div class="'+t.namespace+"-close-icon "+t.namespace+'-close" aria-label="Close">'+t.closeIcon+"</div>"),t},open:function(t){var n=this;if(t&&(t.ctrlKey||t.shiftKey))return!1;if(n.requireWindowWidth&&n.requireWindowWidth>l(window).width())return!1;if(n.$instance.hide().appendTo(n.root),!(t&&t.isDefaultPrevented()||!1===n.beforeOpen(t))){l("body").addClass("featherlight-open"),l(".featherlight").removeClass("active"),n.$instance.addClass("active"),t&&t.preventDefault();var e=n.getContent();if(e)return r.push(n),a(!0),n.$instance.show(),n.beforeContent(t),l.when(e).always(function(e){n.setContent(e),n.width&&n.$content.parent().css("width",n.width),n.height&&n.$content.parent().css("height",n.height),n.maxWidth&&n.$content.parent().css("max-width",n.maxWidth),n.maxHeight&&n.$content.parent().css("max-height",n.maxHeight),n.afterContent(t)}).then(n.$instance.promise()).done(function(){n.afterOpen(t)})}return n.$instance.detach(),l.Deferred().reject().promise()},close:function(e){var t=this,n=l.Deferred();return!1===t.beforeClose(e)?n.reject():(0===i(t).length&&a(!1),t.$instance.hide().detach(),t.afterClose(e),n.resolve(),l(".featherlight:not(.active)").filter(":last").addClass("active"),0===l(".featherlight").length&&l("body").removeClass("featherlight-open")),n.promise()},chainCallbacks:function(e){for(var t in e)this[t]=l.proxy(e[t],this,l.proxy(this[t],this))}},l.extend(s,{id:0,autoBind:'[data-toggle="featherlight"]',defaults:s.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof l&&e},process:function(e){return!1!==this.persist?l(e):l(e).clone(!0)}},image:{regex:/\.(bmp|gif|ico|jpe?g|jp2|a?png|svg|tiff?|webp)(\?\S*)?$/i,process:function(e){var t=l.Deferred(),n=new Image,r=l('<img src="'+e+'" alt="" />');return n.onload=function(){r.naturalWidth=n.width,r.naturalHeight=n.height,t.resolve(r)},n.onerror=function(){t.reject(r)},n.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return l(e)}},ajax:{regex:/./,process:function(e){var n=l.Deferred();e=e.replace("#"," #");var r=l("<div></div>").load(e,function(e,t){"error"!==t&&n.resolve(r.contents()),n.fail()});return n.promise()}},iframe:{process:function(e){var t=new l.Deferred,n=l("<iframe/>");return n.hide().attr("src",e).on("load",function(){t.resolve(n.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return l("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e){if(e){var n=l(e).data();return l.each(this.functionAttributes,function(e,t){void 0!==n[t]&&(n[t]=new Function(n[t]))}),n}},extend:function(e,t){function n(){this.constructor=e}return n.prototype=this.prototype,e.prototype=new n,e.__super__=this.prototype,l.extend(e,this,t),e.defaults=e.prototype,e},attach:function(i,o,a){var s=this;"object"!=typeof o||o instanceof l!=!1||a||(a=o,o=void 0);(a=l.extend({},a)).namespace||s.defaults.namespace;function e(e){var t=l(e.currentTarget),n=l.extend({$source:i,$currentTarget:t},s.readElementConfig(i[0]),s.readElementConfig(this),a),r=c||t.data("featherlight-persisted")||new s(o,n);"shared"===r.persist?c=r:!1!==r.persist&&t.data("featherlight-persisted",r),n.$currentTarget.blur&&n.$currentTarget.blur(),r.open(e)}var c,t=l.extend({},s.defaults,s.readElementConfig(i[0]),a);return i.on(t.openTrigger+"."+t.namespace,t.filter,e),e},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return i(),l.grep(r,function(e){return e instanceof t})},close:function(e){var t=this.current();if(t)return t.close(e)},_onReady:function(){var t=this;t.autoBind&&(l(t.autoBind).each(function(){t.attach(l(this))}),l(document).on("click",t.autoBind,function(e){e.isDefaultPrevented()||t.attach(l(e.currentTarget))(e)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&l.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return this._previouslyActive=document.activeElement,this._$previouslyTabbable=l("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=l("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return l(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),e(t)},afterClose:function(e,t){var t=e(t),n=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){l(t).attr("tabindex",n._previousWithTabIndices[e])}),this._previouslyActive.focus(),t},onResize:function(e,t){return e(t)},afterContent:function(e,t){e=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),e}}}),l.featherlight=s,l.fn.featherlight=function(e,t){return s.attach(this,e,t),this},l(document).ready(function(){s._onReady()})):"console"in window&&window.console.error("Featherlight requires jQuery.")}(jQuery);
//# sourceMappingURL=featherlight.min.js.map