$('#sidebar input[name="filter"]').on({input:function(){let s=$(this).val();""==$(this).val()?$("#box-apps-menu .app").css("display","block"):$("#box-apps-menu .app").each(function(){var e=new RegExp(""+s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"ig");console.log(),e.test($(this).text())?$(this).show():$(this).hide()})}});let timer_ajax_search=null,xhr_search=null;$('#search input[name="query"]').on({focus:function(){$(this).val()&&$("#search.dropdown").addClass("open")},blur:function(){$("#search").filter(":hover").length?$("#search.dropdown").on("blur",function(){$("#search.dropdown").removeClass("open")}):$("#search.dropdown").removeClass("open")},input:function(){xhr_search&&xhr_search.abort();let e=$(this);e.val()?($("#search .results").html(['<div class="loader-wrapper text-center">','  <div class="loader" style="width: 48px; height: 48px;"></div>',"</div>"].join("\n")),$("#search.dropdown").addClass("open"),clearTimeout(timer_ajax_search),timer_ajax_search=setTimeout(function(){xhr_search=$.ajax({type:"get",async:!0,cache:!1,url:window._env.backend.url+"search_results.json?query="+e.val(),dataType:"json",beforeSend:function(e){e.overrideMimeType("text/html;charset="+$("html meta[charset]").attr("charset"))},error:function(e,s,a){$("#search .results").text(s+": "+a)},success:function(e){$("#search .results").html(""),$('#search input[name="query"]').val()?($.each(e,function(e,a){a.results.length&&($("#search .results").append("<h4>"+a.name+'</h4><ul class="flex flex-rows" data-group="'+a.name+'"></ul>'),$.each(a.results,function(e,s){s=$(['<li class="result">','  <a class="list-group-item" href="'+s.link+'" style="border-inline-start: 3px solid '+a.theme.color+"; background: "+a.theme.color+'11;">','    <small class="id float-end">#'+s.id+"</small>",'    <div class="title">'+s.title+"</div>",'    <div class="description"><small>'+s.description+"</small></div>","  </a>","</li>"].join("\n"));$('#search .results ul[data-group="'+a.name+'"]').append(s)}))}),""==$("#search .results").html()&&$("#search .results").html('<p class="text-center no-results"><em>:(</em></p>')):$("#search .results").html("Search")}})},500)):($("#search .results").html(""),$("#search.dropdown").removeClass("open"))}});