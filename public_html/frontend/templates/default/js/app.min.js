if($('.listing.products .product button[name="add_cart_product"]').on("click",function(t){t.preventDefault();let e=$(this),a=$("#site-navigation .shopping-cart"),i=e.closest(".product");$object=$('<div id="animated-cart-item"></div>').css({position:"absolute",top:e.offset().top,left:e.offset().left,height:e.height(),width:e.width(),border:"1px rgba(0, 136, 204, 1) solid",backgroundColor:"rgba(0, 136, 204, .5)",borderRadius:"var(--border-radius)",padding:".5em",zIndex:"999999"}),updateCart("product_id="+i.data("id")+"&add_cart_product=true"),$object.appendTo("body").animate({top:a.offset().top,left:a.offset().left,width:a.innerWidth(),height:a.innerHeight(),borderRadius:0},{duration:1e3,easing:"easeInCubic"}).animate({opacity:0},{duration:250,complete:function(){$object.remove(),a.addClass("open")}})}),$("body").on("submit",'form[name="buy_now_form"]',function(t){t.preventDefault();let e=$(this),a=$(this).find('button[type="submit"]'),i=$("#site-navigation .shopping-cart"),n=$('<div id="animated-cart-item"></div>').css({position:"absolute",top:a.offset().top,left:a.offset().left,height:a.height(),width:a.width(),border:"1px rgba(0, 136, 204, 1) solid",backgroundColor:"rgba(0, 136, 204, .5)",borderRadius:"var(--border-radius)",padding:".5em",zIndex:"999999"});updateCart(e.serialize()+"&add_cart_product=true"),n.appendTo("body").animate({top:i.offset().top,left:i.offset().left,width:i.innerWidth(),height:i.innerHeight(),borderRadius:0},{duration:1e3,easing:"easeInCubic"}).animate({opacity:0},{duration:250,complete:function(){n.remove(),i.addClass("open")}})}),$("body").on("click",'button[name="remove_cart_item"]',function(t){updateCart("remove_cart_item="+$(this).val())}),void 0!==window._env){window.updateCart=function(i){$.ajax({url:window._env.platform.url+"ajax/cart.json",type:i?"post":"get",data:i,cache:!1,async:!0,dataType:"json",beforeSend:function(t){t.overrideMimeType("text/html;charset="+$("meta[charset]").attr("charset"))},error:function(t,e,a){$("#animated-cart-item").remove(),i&&alert("Error while updating cart")},success:function(t){t.alert&&($("#animated-cart-item").remove(),alert(t.alert)),$("#site-navigation .shopping-cart .badge").text(t.items.length),$("#site-navigation .shopping-cart").toggleClass("filled",!!t.items.length),$("#site-navigation .shopping-cart ul .item").remove(),$.each(t.items,function(t,e){$("#site-navigation .shopping-cart ul").append(['<li class="item">','  <div class="grid">','    <div class="col-2">',"      "+$('<img class="image img-responsive">').attr({src:e.image.thumbnail,srcset:e.image.thumbnail+" 1x, "+e.image.thumbnail_2x+" 2x",alt:e.name}).prop("outerHTML"),"    </div>",'    <div class="col-8">',"      <div>"+$('<a class="name"></a>').attr("href",e.link).text(e.name).prop("outerHTML")+"</div>","      "+$('<div class="price"></div>').text(e.formatted_price).prop("outerHTML"),"    </div>",'    <div class="col-2 text-end">',"      "+$('<button class="btn btn-danger btn-sm" name="remove_cart_item" type="submit"><i class="icon icon-trash"></i></button>').val(e.key).prop("outerHTML"),"    </div>","  </div>","</li>"].join("\n"))})}})};let t=setInterval("updateCart()",6e4)}if(void 0!==window._env&&1==window._env.template.settings.sidebar_parallax_effect){let a=$("#sidebar");$(window).on("resize scroll",function(t){var e;768<=$(window).width()&&500<a.parent().height()-a.height()?0<(e=.6*$(this).scrollTop())&&a.css("margin-top",e+"px"):a.css("margin-top",0)}).trigger("resize")}$(".navbar-search :input").on("focus",function(){$(this).closest(".dropdown").addClass("open")}),$(".navbar-search :input").on("blur",function(){$(this).closest(".dropdown").removeClass("open")});let xhrAjaxSearch;$(".navbar-search :input").on("input",function(){let t=$(this).closest(".navbar-search"),i=t.find(".dropdown-menu");t.find(".dropdown-menu").html(""),xhrAjaxSearch&&xhrAjaxSearch.abort(),$(this).val()?xhrAjaxSearch=$.ajax({url:window._env.platform.url+"ajax/search_results.json",type:"get",data:{query:$(this).val()},cache:!1,async:!0,dataType:"json",beforeSend:function(t){t.overrideMimeType("text/html;charset="+$("meta[charset]").attr("charset"))},success:function(t){t?(t.categories&&t.categories.length&&$.each(t.products,function(t,e){var a=$(['<li class="dropdown-menu-item"><a class="dropdown-menu-link" href="'+escapeHTML(category.link)+'">','  <img src="'+escapeHTML(less-featherlight.thumbnail)+'" style="height: 1em;"> '+escapeHTML(category.name),"</a></li>"].join("\n"));i.append(a)}),t.products&&t.products.length&&$.each(t.products,function(t,e){e=$(['<li class="dropdown-menu-item"><a class="dropdown-menu-link" href="'+escapeHTML(e.link)+'">','  <img src="'+escapeHTML(e.image.thumbnail)+'" style="height: 1em;"> '+escapeHTML(e.name),"</a></li>"].join("\n"));i.append(e)})):dropdown.html("<li>:(</li>")}}):t.find(".dropdown-menu").append($("<li></li>").text(t.data("hint")))}),$('.listing .product button[name="add_to_wishlist"]').on("click",function(t){t.preventDefault();let e=$(this).closest(".product");action=e.data("in-wishlist")?"remove":"add",$.ajax({url:window._env.platform.url+"ajax/wishlist.json",type:"post",data:{action:action,product_id:e.data("product-id")},cache:!1,async:!0,dataType:"json",success:function(t){"ok"==t.status&&e.data("in-wishlist",t.added?"1":"0")}})});