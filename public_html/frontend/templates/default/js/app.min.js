waitFor("jQuery",t=>{var e=null;t(".banner[data-id]").hover(function(){e=t(this).data("id")},function(){e=null}),t(".banner[data-id]").on("click",function(){t.post(_env.platform.path+"ajax/bct","banner_id="+t(this).data("id"))}),t(window).on("blur",function(){e&&t.post(_env.platform.path+"ajax/bct","banner_id="+e)})}),waitFor("jQuery",o=>{o('.listing.products .product button[name="add_cart_product"]').on("click",function(t){t.preventDefault();let e=o(this),a=o("#site-navigation .shopping-cart"),i=e.closest(".product");$object=o('<div id="animated-cart-item"></div>').css({position:"absolute",top:e.offset().top,left:e.offset().left,height:e.height(),width:e.width(),border:"1px rgba(0, 136, 204, 1) solid",backgroundColor:"rgba(0, 136, 204, .5)",borderRadius:"var(--border-radius)",padding:".5em",zIndex:"999999"}),updateCart("product_id="+i.data("id")+"&add_cart_product=true"),$object.appendTo("body").animate({top:a.offset().top,left:a.offset().left,width:a.innerWidth(),height:a.innerHeight(),borderRadius:0},{duration:1e3,easing:"easeInCubic"}).animate({opacity:0},{duration:250,complete:function(){$object.remove(),a.addClass("open")}})}),o("body").on("submit",'form[name="buy_now_form"]',function(t){t.preventDefault();let e=o(this),a=o(this).find('button[type="submit"]'),i=o("#site-navigation .shopping-cart"),n=o('<div id="animated-cart-item"></div>').css({position:"absolute",top:a.offset().top,left:a.offset().left,height:a.height(),width:a.width(),border:"1px rgba(0, 136, 204, 1) solid",backgroundColor:"rgba(0, 136, 204, .5)",borderRadius:"var(--border-radius)",padding:".5em",zIndex:"999999"});updateCart(e.serialize()+"&add_cart_product=true"),n.appendTo("body").animate({top:i.offset().top,left:i.offset().left,width:i.innerWidth(),height:i.innerHeight(),borderRadius:0},{duration:1e3,easing:"easeInCubic"}).animate({opacity:0},{duration:250,complete:function(){n.remove(),i.addClass("open")}})}),o("body").on("click",'button[name="remove_cart_item"]',function(t){updateCart("remove_cart_item="+o(this).val())}),"undefined"!=typeof _env&&(window.updateCart=function(i){o.ajax({url:_env.platform.url+"ajax/cart.json",type:i?"post":"get",data:i,cache:!1,async:!0,dataType:"json",beforeSend:function(t){t.overrideMimeType("text/html;charset="+o("meta[charset]").attr("charset"))},error:function(t,e,a){o("#animated-cart-item").remove(),i&&alert("Error while updating cart")},success:function(t){t.alert&&(o("#animated-cart-item").remove(),alert(t.alert)),o("#site-navigation .shopping-cart .badge").text(t.items.length),o("#site-navigation .shopping-cart").toggleClass("filled",!!t.items.length),o("#site-navigation .shopping-cart ul .item").remove(),o.each(t.items,function(t,e){o("#site-navigation .shopping-cart ul").append(['<li class="item">','  <div class="grid">','    <div class="col-2">',"      "+o('<img class="image img-responsive">').attr({src:e.image.thumbnail,srcset:e.image.thumbnail+" 1x, "+e.image.thumbnail_2x+" 2x",alt:e.name}).prop("outerHTML"),"    </div>",'    <div class="col-8">',"      <div>"+o('<a class="name"></a>').attr("href",e.link).text(e.name).prop("outerHTML")+"</div>","      "+o('<div class="price"></div>').text(e.formatted_price).prop("outerHTML"),"    </div>",'    <div class="col-2 text-end">',"      "+o('<button class="btn btn-danger btn-sm" name="remove_cart_item" type="submit"><i class="icon icon-trash"></i></button>').val(e.key).prop("outerHTML"),"    </div>","  </div>","</li>"].join("\n"))})}})},setInterval("updateCart()",6e4))}),waitFor("jQuery",i=>{if(_env&&1==_env.template.settings.sidebar_parallax_effect){let a=i("#sidebar");i(window).on("resize scroll",function(t){var e;768<=i(window).width()&&500<a.parent().height()-a.height()?0<(e=.6*i(this).scrollTop())&&a.css("margin-top",e+"px"):a.css("margin-top",0)}).trigger("resize")}}),waitFor("jQuery",i=>{i.fn.privacyConsent=function(t,e){var a=i(this);return i(this).privacyClasses=t||[],i(this).consents=e||[],a.on("open",function(t){t.preventDefault(),i(this).hide(),i(this).fadeIn()}),a.on("openExpanded",function(t){t.preventDefault(),i(this).hide().find(".privacy-classes").addClass("expanded"),i(this).fadeIn()}),a.on("close",function(t){t.preventDefault(),i(this).fadeOut(function(){i(this).find(".privacy-classes").removeClass("expanded")})}),a.on("cookiesAccepted",function(t){i(".require-consent").each(function(){hasPrivacyConsent(i(this).data("privacy-class"),i(this).data("third-party-id"))&&i(this).replaceWith(i(this).data("content"))}),i('script[type="application/privacy-script"]').each(function(){hasPrivacyConsent(i(this).data("privacy-class"),i(this).data("third-party-id"))&&($newElement=i("<script>").attr("src",i(this).attr("src")).html(i(this).prop("innerHTML")),i(this).replaceWith($newElement))}),i('script[type="application/privacy-content"]').each(function(){hasPrivacyConsent(i(this).data("privacy-class"),i(this).data("third-party-id"))&&i(this).replaceWith(i(this).prop("innerHTML"))}),i(".require-consent[data-privacy-class][third-party-id]").each(function(){hasPrivacyConsent(i(this).data("privacy-class"),i(this).data("third-party-id"))&&i(this).replaceWith(i(this).data("content"))})}),a.hasConsent=function(t,e){},a.find('button[name="customize"]').click(function(){a.find(".privacy-classes").toggleClass("expanded")}),a.find('input[name^="consents"][value="all"]').change(function(){var t=i(this).prop("checked");i(this).closest(".privacy-class").find('input[name^="consents"][value!="all"]').each(function(){i(this).prop("disabled",t),t&&i(this).prop("checked",!0)})}).trigger("change"),i(document).ready(function(){i(".require-consent[data-privacy-class][third-party-id]").each(function(){var t=i(["<p>This element requires a privacy consent for class &quot;"+i(this).data("privacy-class")+"&quot;).</p>",'<button class="btn btn-default"></button>'].join("\n"));i("button",t).text("<?php echo functions::escape_js(language::translate('text_click_here_to_manage_cookie_consents', 'Click here to manage your cookie consents')); ?>"),i("button",t).on("click",function(){a.trigger("openExpanded")}),i(this).html(t)}),document.cookie.match(/privacy_consents=/)&&a.trigger("cookiesAccepted")}),this}}),waitFor("jQuery",i=>{i(".navbar-search :input").on("focus",function(){i(this).closest(".dropdown").addClass("open")}),i(".navbar-search :input").on("blur",function(){i(this).closest(".dropdown").removeClass("open")});let e;i(".navbar-search :input").on("input",function(){let t=i(this).closest(".navbar-search"),a=t.find(".dropdown-menu");t.find(".dropdown-menu").html(""),e&&e.abort(),i(this).val()?e=i.ajax({url:_env.platform.url+"ajax/search_results.json",type:"get",data:{query:i(this).val()},cache:!1,async:!0,dataType:"json",beforeSend:function(t){t.overrideMimeType("text/html;charset="+i("meta[charset]").attr("charset"))},success:function(t){t?(t.categories&&t.categories.length&&i.each(t.products,function(t,e){e=i(['<li class="dropdown-item"><a class="dropdown-menu-link" href="'+category.link.escapeAttr()+'">','  <img src="'+e.thumbnail.escapeAttr()+'" style="height: 1em;"> '+category.name.escapeAttr(),"</a></li>"].join("\n"));a.append(e)}),t.products&&t.products.length&&i.each(t.products,function(t,e){e=i(['<li class="dropdown-item"><a class="dropdown-menu-link" href="'+e.link.escapeAttr()+'">','  <img src="'+e.image.thumbnail.escapeAttr()+'" style="height: 1em;"> '+e.name.escapeAttr(),"</a></li>"].join("\n"));a.append(e)})):dropdown.html("<li>:(</li>")}}):t.find(".dropdown-menu").append(i("<li></li>").text(t.data("hint")))})}),waitFor("jQuery",a=>{a('.listing .product button[name="add_to_wishlist"]').on("click",function(t){t.preventDefault();let e=a(this).closest(".product");action=e.data("in-wishlist")?"remove":"add",a.ajax({url:_env.platform.url+"ajax/wishlist.json",type:"post",data:{action:action,product_id:e.data("product-id")},cache:!1,async:!0,dataType:"json",success:function(t){"ok"==t.status&&e.data("in-wishlist",t.added?"1":"0")}})})});